<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Housing Switzerland</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="home">
    <div class="logo">SH</div>

    <!-- Home Page Buttons -->
    <div class="home-buttons">
        <button class="home-button" onclick="goToPage('chemin-de-praz-1.html')">Chemin de Praz</button>
        <button class="home-button" onclick="goToPage('lentilleres-1.html')">Chemin des Lentill√®res</button>
        <button class="home-button" onclick="goToPage('maladiere-1.html')">Route de la Maladi√®re</button>
        <button class="home-button" onclick="goToPage('chavannes-1.html')">Les Jardins de Chavannes</button>
    </div>

    <!-- "Switzerland" Text -->
    <div class="switzerland-text">Switzerland</div>

    <!-- JavaScript -->
    <script>
        function goToPage(page) {
            window.location.href = page;
        }

        // Register Firebase Messaging Service Worker
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("firebase-messaging-sw.js")
                .then(registration => {
                    console.log("‚úÖ Service Worker registered with scope:", registration.scope);
                })
                .catch(err => {
                    console.error("‚ùå Service Worker registration failed:", err);
                });
        }

        // Request permission for push notifications & Get FCM Token
        if ("Notification" in window && "serviceWorker" in navigator) {
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    console.log("‚úÖ User allowed notifications");

                    // Firebase Messaging
                    import("https://www.gstatic.com/firebasejs/11.4.0/firebase-messaging.js").then(({ getMessaging, getToken }) => {
                        const messaging = getMessaging();

                        getToken(messaging, { vapidKey: "BN9qYQeo8YY3mwtLM2TF162eGpZpX3c708467z9EW2Vjch6rFsgK2aeXUgrpsluj1rHfDWwcBy1gwKFj06z3m2o" })
                            .then(token => {
                                if (token) {
                                    console.log("‚úÖ FCM Token:", token);
                                } else {
                                    console.warn("‚ö†Ô∏è No FCM token received.");
                                }
                            })
                            .catch(error => {
                                console.error("‚ùå Error getting FCM token:", error);
                            });
                    });

                } else {
                    console.log("‚ùå User denied notifications");
                }
            });
        }
    </script>

    <!-- Firebase SDK -->
    <script type="module">
<script type="module">
    // Import Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAK716HaIO4bwBC-3ZNqNQ20Oa0pfCv5Hs",
        authDomain: "student-housing-switzerland.firebaseapp.com",
        projectId: "student-housing-switzerland",
        storageBucket: "student-housing-switzerland.firebasestorage.app",
        messagingSenderId: "926144922705",
        appId: "1:926144922705:web:c1e03148bf1b334e9ea470",
        measurementId: "G-WXCXZVNPHM"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Function to Fetch Lease Data from Firestore
    async function fetchLeases() {
        const leasesRef = collection(db, "leases");
        const leaseSnapshot = await getDocs(leasesRef);

        leaseSnapshot.forEach(doc => {
            const leaseData = doc.data();
            console.log("üî• Lease Data:", leaseData);
        });
    }

    // Fetch lease data when the page loads
    fetchLeases();
</script>

